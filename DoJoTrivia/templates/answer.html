{% extends "layout.html" %}

{% block title %}
    Answer
{% endblock %}

{% block main %}
    <br>
    <head>
            <div class='roomtag'>
                Room: {{ room }}
            </div>
            <br/>
            <br/>
            <h1><strong id='question'>
                {{ question }}
            </strong></h1>
    </head>
    <hr class="line_title">
    </hr>
    <br>
    <br>
    <br>
    <table class='w-100' id='maincon'>
        <tr style='width: auto'>
            <td><button class="btn btn-primary answer w-100" id ='answer0'>{{ answer0 }}</button></td>
            <td><button class="btn btn-primary answer w-100" id='answer1'>{{ answer1 }}</button></button></td>
        </tr>
        <tr>
            <td><button class="btn btn-primary answer w-100" id='answer2'>{{ answer2 }}</button></td>
            <td><button class="btn btn-primary answer w-100" id='answer3'>{{ answer3 }}</button></td>
        </tr>
    </table>

    <div id='wronghidden' style='display: none'>
        <form action="{{ url_for('wrong_answer') }}" method="post">
            <button class="btn btn-primary btn-lg" type="submit" onclick='waitmsg()'>WRONG! Next question</button>
        </form>
    </div>
    <div id='corhidden' style='display: none'>
        <form action="{{ url_for('correct_answer') }}" method="post">
            <button class="btn btn-primary btn-lg" type="submit" onclick='waitmsg()'>CORRECT! Next question</button>
        </form>
    </div>


    <form action="{{ url_for('retreat') }}" name="retreating" method="post">
        <fieldset>
            <br>
            <div class="form-group">
                <button class="btn btn-primary" type="submit">RETREAT</button>
            </div>
        </fieldset>
    </form>
    <strong class='h1'><h1 id='feedback'></h1></strong>

    <p class='text-center'>{{ option }}
    <br>
    {{ test  }}
    <br/>
    <br/>
    <br/>



    <div id='getJSON'>
        {{ jsonfile }}
    </div>
    </p>



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
        // // Read JSON file
        // var jsonfile = document.getElementById("getJSON").innerHTML;
        // var quizlist = JSON.parse(jsonfile);

        // document.getElementById('question').innerHTML = quizlist.q0[0];

        // // Scramble answers
        // // Init arrays for scrambling
        // var idArray = ['answer0', 'answer1', 'answer2', 'answer3'];
        // var answerArray = [quizlist.q0[2], quizlist.q0[1][0], quizlist.q0[1][1], quizlist.q0[1][2]];
        // // Choose random position for answer and remove position from the possible positions
        // while (idArray.length > 0) {
        //     var ran = Math.floor(Math.random() * idArray.length);
        //      var rans = Math.floor(Math.random() * answerArray.length);
        //     document.getElementById(idArray[ran]).innerHTML = answerArray[rans];
        //     idArray.splice(ran, 1);
        //     answerArray.splice(rans, 1);
        // };



        $( ".answer" ).click(function() {
            // remember selected answer
            var button_text = $(this).text();
            // compares given answers with correct answer
            var given_answer =  "{{ coranswer }}";
            if (given_answer===button_text){
                document.getElementById("maincon").innerHTML = '<strong class="h1 waitmsg">Correct!</strong>';
                document.getElementById("corhidden").style.display = "block";
            }
            else if (given_answer != button_text){
                 document.getElementById("maincon").innerHTML = '<strong class="h1 waitmsg">Wrong! The correct answer is:<br/>'+given_answer+'</strong>';
                 document.getElementById("wronghidden").style.display = "block";
            }

            function waitmsg(){
                document.getElementById("maincon").innerHTML = 'Waiting for players';
            };

        })
</script>
{% endblock %}





